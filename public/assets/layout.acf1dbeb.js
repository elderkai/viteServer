import{u as e,a as s,b as a,j as o,r as l,k as t,l as r,p as n,d as i,c,e as u,o as d,f as m,g as p,t as v,m as g,v as f,w as h,n as w,h as _,i as k}from"./index.1627e1f5.js";import{_ as b}from"./upPicture.3dda5e9e.js";import"./vendor.521ca53b.js";import"./toolFun.857f6b78.js";const y={components:{upPicture:b},props:{},setup(n,i){const{proxy:u,ctx:d}=w(),m=e(),p=s(),v=a();console.log(v);let g=o({username:"",password:"",email:"",picUrl:"",power:0}),f=o(!1),h=o(!1),_=o(!1),k=l({username:"",picUrl:"",_id:"",email:""});k.username=v.state.userInfo.username,k.picUrl=v.state.userInfo.picUrl,k._id=v.state.userInfo._id,k.email=v.state.userInfo.email;let b=o("");return t("coverPic",b),r((()=>{!function(){let e=m.path,s=document.getElementsByClassName("nav-item");for(var a=0;a<s.length;a++)s[a].style.color="#71777c";switch(e){case"/home":s[0].style.color="rgb(64, 158, 255)";break;case"/":s[1].style.color="rgb(64, 158, 255)";break;case"/timeSort":s[2].style.color="rgb(64, 158, 255)";break;case"/project":s[3].style.color="rgb(64, 158, 255)";break;case"/course":s[4].style.color="rgb(64, 158, 255)";break;case"/message":s[5].style.color="rgb(64, 158, 255)";break;case"/about":s[6].style.color="rgb(64, 158, 255)"}}()})),{navGo:function(e){let s=document.getElementsByClassName("nav-item");for(var a=0;a<s.length;a++)s[a].style.color="#71777c";e.target.style.color="rgb(64, 158, 255)","首页"==e.target.innerHTML?p.push("/home"):"文章"==e.target.innerHTML?p.push("/"):"归档"==e.target.innerHTML?p.push("/timeSort"):"项目"==e.target.innerHTML?p.push("/project"):"历程"==e.target.innerHTML?p.push("/course"):"留言"==e.target.innerHTML?p.push("/message"):"关于"==e.target.innerHTML&&p.push("/about")},showRegister:f,userInfo:g,register:function(){g.picUrl=b.value;const{username:e,password:s,power:a,email:o}=g.value;h.value?u.$axios.post("/login",{username:e,password:s}).then((e=>{200==e.code&&(h.value=!1,f.value=!1,k.username=e.data.username,k.picUrl=e.data.picUrl,k._id=e.data._id,k.email=e.data.email,v.commit("CHANGE_userInfo",k),c.success({message:e.msg,type:"success"}))})):u.$axios.post("/register",{username:e,password:s,power:a,email:o}).then((e=>{200==e.code&&(f.value=!1,c.success({message:e.msg,type:"success"}),g.value.username="",g.value.password="",g.value.email="",g.value.picUrl="",v.commit("CHANGE_userInfo",g.value))}))},showLogin:h,loginInfo:k,logout:function(){u.$axios.post("logout").then((e=>{200==e.code&&(c.success({message:e.msg}),k._id="",k.username="",k.picUrl="https://blog-1256024584.cos.ap-nanjing.myqcloud.com/12312.png",v.commit("CHANGE_userInfo",k))}))},showUpPic:_,upPic:function(){u.$axios.post("/user/updata",{picUrl:b.value,username:k.username,email:k.email,power:0,_id:k._id}).then((e=>{200==e.code&&(_.value=!1,k.picUrl=b.value,v.commit("CHANGE_userInfo",k),c.success({message:e.msg}))}))}}}},C=_("data-v-3f482354");n("data-v-3f482354");const I={class:"headerBox"},U={class:"grid-content bg-purple-dark"},G={class:"headerCenter"},x=p("div",{class:"logo"},[p("div",{class:"text-magic","data-word":"zkblog"})],-1),V={class:"nav-box"},L={key:0,class:"login-btns"},H=k("登录"),P=k("注册"),j={key:1},N={class:"userInfo_box"},M={class:"el-dropdown-link"},T={class:"userName"},E=k("上传头像"),R=k("退出登录"),A={class:"form_register"},$={class:"userName"},B=k(" 用户名：   "),K={class:"email"},S=k(" 邮箱：      "),q={class:"password"},z=k(" 密码：      "),F={class:"dialog-footer"},D=k("取 消"),J=k("确 定"),O={class:"form_register"},Q={class:"password"},W=k(" 头像：            "),X={class:"dialog-footer"},Y=k("取 消"),Z=k("确 定");i();const ee=C(((e,s,a,o,l,t)=>{const r=u("el-button"),n=u("el-avatar"),i=u("el-dropdown-item"),c=u("el-dropdown-menu"),w=u("el-dropdown"),_=u("el-col"),k=u("el-input"),b=u("el-dialog"),y=u("up-picture");return d(),m("div",I,[p(_,{span:60},{default:C((()=>[p("div",U,[p("div",G,[x,p("div",V,[p("div",{onClick:s[1]||(s[1]=(...e)=>o.navGo&&o.navGo(...e)),class:"nav-item"},"首页"),p("div",{onClick:s[2]||(s[2]=(...e)=>o.navGo&&o.navGo(...e)),class:"nav-item checked"},"文章"),p("div",{onClick:s[3]||(s[3]=(...e)=>o.navGo&&o.navGo(...e)),class:"nav-item"},"归档"),p("div",{onClick:s[4]||(s[4]=(...e)=>o.navGo&&o.navGo(...e)),class:"nav-item"},"项目"),p("div",{onClick:s[5]||(s[5]=(...e)=>o.navGo&&o.navGo(...e)),class:"nav-item"},"历程"),p("div",{onClick:s[6]||(s[6]=(...e)=>o.navGo&&o.navGo(...e)),class:"nav-item"},"留言"),p("div",{onClick:s[7]||(s[7]=(...e)=>o.navGo&&o.navGo(...e)),class:"nav-item"},"关于")]),o.loginInfo.username?(d(),m("div",j,[p("div",N,[p(w,null,{dropdown:C((()=>[p(c,null,{default:C((()=>[p(i,{onClick:s[10]||(s[10]=e=>o.showUpPic=!0)},{default:C((()=>[E])),_:1}),p(i,{onClick:o.logout},{default:C((()=>[R])),_:1},8,["onClick"])])),_:1})])),default:C((()=>[p("span",M,[p(n,{src:o.loginInfo.picUrl},null,8,["src"]),p("p",T,v(o.loginInfo.username),1)])])),_:1})])])):(d(),m("div",L,[p(r,{onClick:s[8]||(s[8]=e=>{o.showLogin=!0,o.showRegister=!0}),type:"text"},{default:C((()=>[H])),_:1}),p(r,{onClick:s[9]||(s[9]=e=>{o.showRegister=!0,o.showLogin=!1}),type:"text"},{default:C((()=>[P])),_:1})]))])])])),_:1}),p(b,{title:o.showLogin?"登录":"注册",modelValue:o.showRegister,"onUpdate:modelValue":s[15]||(s[15]=e=>o.showRegister=e),width:"350px"},{footer:C((()=>[p("span",F,[p(r,{onClick:s[14]||(s[14]=e=>o.showRegister=!1)},{default:C((()=>[D])),_:1}),p(r,{type:"primary",onClick:o.register},{default:C((()=>[J])),_:1},8,["onClick"])])])),default:C((()=>[p("div",A,[p("div",$,[B,p(k,{modelValue:o.userInfo.username,"onUpdate:modelValue":s[11]||(s[11]=e=>o.userInfo.username=e),placeholder:"请输入用户名"},null,8,["modelValue"])]),g(p("div",K,[S,p(k,{modelValue:o.userInfo.email,"onUpdate:modelValue":s[12]||(s[12]=e=>o.userInfo.email=e),placeholder:"请输入邮箱"},null,8,["modelValue"])],512),[[f,!o.showLogin]]),p("div",q,[z,p(k,{modelValue:o.userInfo.password,"onUpdate:modelValue":s[13]||(s[13]=e=>o.userInfo.password=e),onKeyup:h(o.register,["enter"]),placeholder:"请输入密码"},null,8,["modelValue","onKeyup"])])])])),_:1},8,["title","modelValue"]),p(b,{title:"上传头像",modelValue:o.showUpPic,"onUpdate:modelValue":s[17]||(s[17]=e=>o.showUpPic=e),width:"420px"},{footer:C((()=>[p("span",X,[p(r,{onClick:s[16]||(s[16]=e=>o.showUpPic=!1)},{default:C((()=>[Y])),_:1}),p(r,{type:"primary",onClick:o.upPic},{default:C((()=>[Z])),_:1},8,["onClick"])])])),default:C((()=>[p("div",O,[p("div",Q,[W,p(y)])])])),_:1},8,["modelValue"])])}));y.render=ee,y.__scopeId="data-v-3f482354";const se={components:{headerComp:y},setup:()=>({})},ae=_("data-v-7fdcdcb2")(((e,s,a,o,l,t)=>{const r=u("header-comp"),n=u("router-view");return d(),m("div",null,[p(r),p(n)])}));se.render=ae,se.__scopeId="data-v-7fdcdcb2";export default se;
