import{f as e,d as a,p as s,k as o,a3 as l,a4 as t,r as n,o as r,c as u,a as i,x as c,E as d,M as m,Q as p,I as v,a5 as g,O as f}from"./vendor.03d6fc96.js";import{u as h,a as w,b,h as k}from"./index.f85ab036.js";import{_}from"./upPicture.de3cfdee.js";import"./toolFun.0a0a83c0.js";const y={components:{upPicture:_},props:{},setup(l,t){const{proxy:n,ctx:r}=v(),u=h(),i=w(),c=b();let d=e({username:"",password:"",email:"",picUrl:"",power:0}),m=e(!1),p=e(!1),g=e(!1),f=a({username:"",picUrl:"",_id:"",email:""});f.username=c.state.userInfo.username,f.picUrl=c.state.userInfo.picUrl,f._id=c.state.userInfo._id,f.email=c.state.userInfo.email;let _=e("");s("coverPic",_);const y=a({value1:0});return o((()=>{!function(){let e=u.path,a=document.getElementsByClassName("nav-item");for(var s=0;s<a.length;s++)a[s].style.color="#71777c";switch(e){case"/":a[0].style.color="rgb(64, 158, 255)",y.value1=0;break;case"/timeSort":a[1].style.color="rgb(64, 158, 255)",y.value1=1;break;case"/project":a[2].style.color="rgb(64, 158, 255)",y.value1=2;break;case"/course":a[3].style.color="rgb(64, 158, 255)",y.value1=3;break;case"/message":a[4].style.color="rgb(64, 158, 255)",y.value1=4;break;case"/about":a[5].style.color="rgb(64, 158, 255)",y.value1=5}}()})),{navGo:function(e){let a=document.getElementsByClassName("nav-item");for(var s=0;s<a.length;s++)a[s].style.color="#71777c";e.target.style.color="rgb(64, 158, 255)","首页"==e.target.innerHTML?i.push("/home"):"文章"==e.target.innerHTML?i.push("/"):"归档"==e.target.innerHTML?i.push("/timeSort"):"项目"==e.target.innerHTML?i.push("/project"):"历程"==e.target.innerHTML?i.push("/course"):"留言"==e.target.innerHTML?i.push("/message"):"关于"==e.target.innerHTML&&i.push("/about")},showRegister:m,userInfo:d,register:function(){d.picUrl=_.value;const{username:e,password:a,power:s,email:o}=d.value;p.value?n.$axios.post("/login",{username:e,password:a}).then((e=>{200==e.code&&(p.value=!1,m.value=!1,f.username=e.data.username,f.picUrl=e.data.picUrl,f._id=e.data._id,f.email=e.data.email,c.commit("CHANGE_userInfo",f),k.success({message:e.msg,type:"success"}))})):n.$axios.post("/register",{username:e,password:a,power:s,email:o}).then((e=>{200==e.code&&(m.value=!1,k.success({message:e.msg,type:"success"}),d.value.username="",d.value.password="",d.value.email="",d.value.picUrl="",c.commit("CHANGE_userInfo",d.value))}))},showLogin:p,loginInfo:f,logout:function(){n.$axios.post("logout").then((e=>{200==e.code&&(k.success({message:e.msg}),f._id="",f.username="",f.picUrl="https://blog-1256024584.cos.ap-nanjing.myqcloud.com/12312.png",c.commit("CHANGE_userInfo",f))}))},showUpPic:g,upPic:function(){n.$axios.post("/user/updata",{picUrl:_.value,username:f.username,email:f.email,power:0,_id:f._id}).then((e=>{200==e.code&&(g.value=!1,f.picUrl=_.value,c.commit("CHANGE_userInfo",f),k.success({message:e.msg}))}))},state:y,option1:[{text:"文章",value:1},{text:"归档",value:2},{text:"项目",value:3},{text:"历程",value:4},{text:"留言",value:5},{text:"关于",value:6}],mobleMenu:function(e){switch(e){case 1:i.push("/");break;case 2:i.push("/timeSort");break;case 3:i.push("/project");break;case 4:i.push("/course");break;case 5:i.push("/message");break;case 6:i.push("/about")}}}}},C=g();l("data-v-40289bbc");const I={class:"headerBox"},x={class:"grid-content bg-purple-dark"},U={class:"headerCenter"},G=i("div",{class:"logo"},[i("div",{class:"text-magic","data-word":"zkblog"},[i("div",{class:"white"})])],-1),V={class:"nav-box"},L={key:0,class:"login-btns"},H=f("登录"),M=f("注册"),j={key:1},N={class:"userInfo_box"},E={class:"el-dropdown-link"},T={class:"userName"},R=f("退出登录"),P={class:"form_register"},A={class:"userName"},$=f(" 用户名：   "),B={class:"email"},S=f(" 邮箱：      "),K={class:"password"},q=f(" 密码：      "),z={class:"dialog-footer"},F=f("取 消"),O=f("确 定");t();const Q=C(((e,a,s,o,l,t)=>{const v=n("el-button"),g=n("el-avatar"),f=n("el-dropdown-item"),h=n("el-dropdown-menu"),w=n("el-dropdown"),b=n("van-dropdown-item"),k=n("van-dropdown-menu"),_=n("el-col"),y=n("el-input"),Q=n("el-dialog");return r(),u("div",I,[i(_,{span:60},{default:C((()=>[i("div",x,[i("div",U,[G,i("div",V,[i("div",{onClick:a[1]||(a[1]=(...e)=>o.navGo&&o.navGo(...e)),class:"nav-item checked"},"文章"),i("div",{onClick:a[2]||(a[2]=(...e)=>o.navGo&&o.navGo(...e)),class:"nav-item"},"归档"),i("div",{onClick:a[3]||(a[3]=(...e)=>o.navGo&&o.navGo(...e)),class:"nav-item"},"项目"),i("div",{onClick:a[4]||(a[4]=(...e)=>o.navGo&&o.navGo(...e)),class:"nav-item"},"历程"),i("div",{onClick:a[5]||(a[5]=(...e)=>o.navGo&&o.navGo(...e)),class:"nav-item"},"留言"),i("div",{onClick:a[6]||(a[6]=(...e)=>o.navGo&&o.navGo(...e)),class:"nav-item"},"关于")]),o.loginInfo.username?(r(),u("div",j,[i("div",N,[i(w,null,{dropdown:C((()=>[i(h,null,{default:C((()=>[i(f,{onClick:o.logout},{default:C((()=>[R])),_:1},8,["onClick"])])),_:1})])),default:C((()=>[i("span",E,[i(g,{src:o.loginInfo.picUrl},null,8,["src"]),i("p",T,c(o.loginInfo.username),1)])])),_:1})])])):(r(),u("div",L,[i(v,{onClick:a[7]||(a[7]=e=>{o.showLogin=!0,o.showRegister=!0}),type:"text"},{default:C((()=>[H])),_:1}),i(v,{onClick:a[8]||(a[8]=e=>{o.showRegister=!0,o.showLogin=!1}),type:"text"},{default:C((()=>[M])),_:1})])),i(k,null,{default:C((()=>[i(b,{onChange:o.mobleMenu,modelValue:o.state.value1,"onUpdate:modelValue":a[9]||(a[9]=e=>o.state.value1=e),options:o.option1},null,8,["onChange","modelValue","options"])])),_:1})])])])),_:1}),i(Q,{title:o.showLogin?"登录":"注册",modelValue:o.showRegister,"onUpdate:modelValue":a[14]||(a[14]=e=>o.showRegister=e),width:"350px"},{footer:C((()=>[i("span",z,[i(v,{onClick:a[13]||(a[13]=e=>o.showRegister=!1)},{default:C((()=>[F])),_:1}),i(v,{type:"primary",onClick:o.register},{default:C((()=>[O])),_:1},8,["onClick"])])])),default:C((()=>[i("div",P,[i("div",A,[$,i(y,{modelValue:o.userInfo.username,"onUpdate:modelValue":a[10]||(a[10]=e=>o.userInfo.username=e),placeholder:"请输入用户名"},null,8,["modelValue"])]),d(i("div",B,[S,i(y,{modelValue:o.userInfo.email,"onUpdate:modelValue":a[11]||(a[11]=e=>o.userInfo.email=e),placeholder:"请输入邮箱"},null,8,["modelValue"])],512),[[m,!o.showLogin]]),i("div",K,[q,i(y,{modelValue:o.userInfo.password,"onUpdate:modelValue":a[12]||(a[12]=e=>o.userInfo.password=e),onKeyup:p(o.register,["enter"]),placeholder:"请输入密码"},null,8,["modelValue","onKeyup"])])])])),_:1},8,["title","modelValue"])])}));y.render=Q,y.__scopeId="data-v-40289bbc";const D={components:{headerComp:y},setup:()=>({})},J=g()(((e,a,s,o,l,t)=>{const c=n("header-comp"),d=n("router-view");return r(),u("div",null,[i(c),i(d)])}));D.render=J,D.__scopeId="data-v-7fdcdcb2";export default D;
